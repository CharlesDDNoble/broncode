{% load static %}
<!DOCTYPE html>
<html lang="en">
    <title>Broncode Courses</title>
    <head>
        <!--Import Google Icon Font-->
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <!--Import materialize.css-->
        <link type="text/css" rel="stylesheet" href="{% static 'poc/materialize/css/materialize.min.css' %}"  media="screen,projection"/>

        <!--Let browser know website is optimized for mobile-->
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

        <!--Import thepage.css-->
        <link type="text/css" rel="stylesheet" href="{% static 'poc/css/course.css' %}">
    </head>
    
    <body>
        <header>
            {% block navbar %}
            {% include 'poc/component-navbar.html' %}
            {% endblock %}
        </header>
        
        <!-- First Row -->
        <div class="row container" id="courses-row">
            <div class="col s12">
                <h1 class="brown-color">Courses</h1>
            </div>
            {% for course in courses %}
                <div id="course_{{ course.id }}_card" class="col s12 m6 l4">
                    <div class="card small blue-grey darken-4 z-depth-0">
                        <div class="card-content white-text">
                            <span class="card-title">{{ course.title }}</span>
                            <p></p>
                        </div>
                        <div class="card-action">
                            <a class="waves-effect waves-light btn-flat" href="{% url 'lesson_list' course_id=course.id %}">Lessons</a>

                            {% if user.is_staff %}
                                <!-- Modal 2 Trigger -->
                                <button data-toggle="modal" data-target="course_{{ course.id }}_modal" class="waves-effect waves-light modal-trigger right btn-flat red-text">Delete</button>
                            {% endif %}
                        </div>
                    </div>
                </div>
                {% if user.is_staff %}
                <!-- Modal For Lesson Deletion -->
                <div id="course_{{ course.id }}_modal" class="modal">
                    <div class="modal-content">
                        <h4>Delete Lesson</h4>
                        <p>Are you sure you want to delete this course?</p>
                        </div><div class="modal-footer">
                        <a href="#!" class="modal-close waves-effect waves-green btn-flat">Cancel</a>
                        <a href="#!" onclick="delete_course({{ course.id }})" class="modal-close waves-effect waves-green btn-flat">Delete</a>
                    </div>
                </div>
                {% endif %}
            {% endfor %}
            {% if user.is_staff %}
                <div id="card-create-course" class="col s12 m6 l4">
                    <div class="card small blue-grey darken-3 z-depth-0">
                        <div class="card-content white-text">
                            <span class="card-title">Create a New Course!</span>
                        </div>
                        <div class="card-action">
                            <!-- Modal 1 Trigger -->
                            <a class="waves-effect waves-light btn-flat modal-trigger" href="#modal1">Create</a>
                        </div>
                    </div>
                </div>
            {% endif %}
             <!-- Modal Trigger -->
            {% comment %} <a class="waves-effect waves-light btn modal-trigger" href="#modal1">Modal</a> {% endcomment %}

            <!-- Modal Structure -->
            <div id="modal1" class="modal bottom-sheet">
                <div class="modal-content">
                    <h4>Create a new course!</h4>
                    <div class="row">
                        {% comment %} <!-- Action is provided in `static/poc/js/createcourse.js` -->
                        <form action="" class="col s12" method="post" id="form-create-course">
                        {% csrf_token %}

                            <!-- Lesson Name -->
                            <div class="input-field col s12">
                                <input placeholder="" id="course-name" type="text" class="validate white-text">
                                <label for="course-name">Course Name</label>
                            </div>

                            <!-- Language -->
                            <div class="input-field col s12">
                                <select id="select-language">
                                    <option value="" style="color:white;" disabled selected>Choose Language</option>
                                    <option value="Python3">Python</option>
                                    <option value="C">C</option>
                                    <option value="R">R</option>
                                </select>
                                <label>Language Select</label>
                            </div>
                            <div class="fixed-action-btn">
                                <a href="#!" id="btn-create-course" class="btn-floating btn-large waves-effect waves-light red"><i class="material-icons">send</i></a> 
                            </div>
                        </form> 
                    </div>
                </div>
            </div>
            <!-- Modal 1 Structure -->
            {% comment %} <div id="modal1" class="modal modal-fixed-footer">
                <div class="modal-content">
                    <h4>Create a new course!</h4>
                    <div class="row">
                        <!-- Action is provided in `static/poc/js/createcourse.js` -->
                        <form action="" class="col s12" method="post" id="form-create-course">
                            {% csrf_token %}
                            <div class="row">
                                <div class="input-field col s12">
                                    <select>
                                    <option value="" disabled selected>Choose your option</option>
                                    <option value="Python3">Python</option>
                                    <option value="C">C</option>
                                    <option value="R">R</option>
                                    </select>
                                    <label>Select Course</label>
                                </div>
                            </div>
                        </form>
                    </div>
                </div> 
                <div class="modal-footer">
                    <a href="#!" id="btn-cancel-create" class="modal-close waves-effect waves-green btn-flat">Cancel</a>
                    <a href="#!" id="btn-create-course" class="modal-close waves-effect waves-green btn-flat">Create</a>
                </div>
            </div> {% endcomment %}
            <!-- Modal 2 Structure -->
            <div id="modal2" class="modal">
                <div class="modal-content">
                    <h4>Confirmation</h4>
                    <h6>Are you sure you want to delete?</h6>
                </div>
                <div class="modal-footer">
                    <a href="#!" id="btn-cancel-delete" class="modal-close waves-effect waves-green btn">Cancel</a>
                    <a href="#!" id="btn-delete-course" class="modal-close waves-effect waves-green btn red" onclick="delete_course()">Delete</a>
                </div>
            </div>
        </div>
        <footer>
            <!--JavaScript at end of body for optimized loading-->
            <script type="text/javascript" src="{% static 'poc/jquery/jquery-3.4.0.js' %}"></script>
            <script type="text/javascript" src="{% static 'poc/materialize/js/materialize.min.js' %}"></script>
            <script type="text/javascript" src="{% static 'poc/js/course.js' %}"></script>
            <script>
                $(document).ready(function(){
                    // Side nav
                    $('.sidenav').sidenav();
                    
                    // Modal
                    $('.modal').modal();

                    // Select form
                    $('select').formSelect();
                });
            </script>
        </footer>
    </body>
    
</html>